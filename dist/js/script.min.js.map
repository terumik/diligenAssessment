{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/modules/content.js","src/js/modules/highlighter.js","src/js/modules/navigation.js","src/js/script.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Content","index","fetch","then","res","ok","document","getElementById","innerHTML","status","statusText","json","documents","paragraph","catch","err","console","log","Highlighter","addEventListener","highlighted","getElementsByClassName","textnode","createTextNode","innerText","oldspan","parentNode","replaceChild","removeHighlight","wordSelected","span","regex","sameWords","selectedText","window","getSelection","getRangeAt","createElement","className","appendChild","extractContents","insertNode","commonAncestorContainer","lastElementChild","RegExp","textContent","replace","_content","Navigation","count","numberOfPaages","createNavLink","li","id","onclick","activateLink","activeLink","removeAttribute","target","setAttribute","_content2","default","getParagraphByIndex","navigation","_navigation2","highlighter","_highlighter2","createNavMenu","highlight"],"mappings":"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","file":"script.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","class Content {\r\n    \r\n    // get paragraph from server by index\r\n    getParagraphByIndex(index){\r\n\r\n        fetch(`https://diligen-node.herokuapp.com/getParagraph/${index}`)\r\n        .then(res=>{\r\n            // display 404 error\r\n            if (!res.ok) {\r\n                document.getElementById('body__paragraph--display').innerHTML = \r\n                `\r\n                <h2>404 Page Not Found</h2>\r\n                <p>The link you followed probably broken, or the page has been removed.</p>\r\n                `;\r\n                throw Error(`${res.status}: ${res.statusText}`);\r\n            }\r\n            return res;\r\n        })\r\n        // if the responce is ok\r\n        .then(res=>res.json())\r\n        .then(json=>json[0].documents)\r\n        .then((paragraph)=>{\r\n            document.getElementById('body__paragraph--display').innerHTML = paragraph;\r\n        })\r\n        .catch(err=>{\r\n            console.log(err);\r\n        });\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Content;","class Highlighter{\r\n\r\n    highlight(){\r\n\r\n        let paragraph = document.getElementById('body__paragraph--display');\r\n    \r\n        paragraph.addEventListener('click', function(){\r\n            \r\n            removeHighlight();\r\n            let selectedText = getText();\r\n            findWords(paragraph, selectedText);\r\n\r\n        });\r\n    }\r\n}\r\nexport default Highlighter;\r\n\r\n// Private Methods\r\n\r\n// 1. Remove .highlight\r\nfunction removeHighlight(){\r\n\r\n    let highlighted = document.getElementsByClassName(\"highlight\");\r\n    if(highlighted.length !== 0){\r\n        for (let i = highlighted.length-1; i >= 0; i--) {\r\n            let textnode = document.createTextNode(highlighted[i].innerText);\r\n            let oldspan = highlighted[i];\r\n            highlighted[i].parentNode.replaceChild(textnode, oldspan);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n// 2. find a highlighted text\r\nfunction getText(){\r\n    let wordSelected = window.getSelection().getRangeAt(0),\r\n    span = document.createElement('span');\r\n\r\n    span.className = 'highlight';                       \r\n    span.appendChild(wordSelected.extractContents());\r\n\r\n    wordSelected.insertNode(span);\r\n\r\n    return wordSelected.commonAncestorContainer.lastElementChild.innerText;\r\n}\r\n\r\n// 3. find the same words and add .highlight\r\nfunction findWords(paragraph, selectedText){\r\n    let regex = new RegExp('('+ selectedText +')', 'ig');\r\n    let sameWords = paragraph.textContent.replace(regex, '<span class=\"highlight\">$1</span>');\r\n    paragraph.innerHTML = sameWords;\r\n}\r\n","import Content from './content'\r\n\r\nclass Navigation{\r\n\r\n    createNavMenu(){\r\n        getNumOfParagraphs()\r\n        .then((numberOfPaages)=>{\r\n            for (let i = 1;i <= numberOfPaages; i++) {\r\n                createNavLink(i)\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport default Navigation;\r\n\r\n// Private Methods\r\n\r\n// 1. return Promise count\r\nfunction getNumOfParagraphs(){\r\n    return fetch('https://diligen-node.herokuapp.com/getNumOfParagraphs')\r\n    .then(res=>res.json())\r\n    .then(json=>json[0].count);\r\n}\r\n\r\n// 2. display navigation links\r\nfunction createNavLink(index){\r\n    let li = document.createElement('li');\r\n    li.id = index;\r\n\r\n    // set onclick event and pass the index of the paragraph\r\n    li.onclick = activateLink;\r\n\r\n    document.getElementById('nav__pages')\r\n    .appendChild(li)\r\n    .innerHTML =`Paragraph ${index}`;\r\n}\r\n\r\n// 3. activate the link and get a paragraph\r\nfunction activateLink(e){\r\n    let activeLink = document.getElementsByClassName('active')[0] ? \r\n    document.getElementsByClassName('active')[0] : \r\n    null;\r\n\r\n    if(activeLink){\r\n        activeLink.removeAttribute('class');\r\n    }\r\n    e.target.setAttribute('class', 'active');\r\n\r\n    let content = new Content();\r\n    content.getParagraphByIndex(e.target.id);\r\n}","import Content from './modules/content';\r\nimport Navigation from './modules/navigation';\r\nimport Highlighter from './modules/highlighter';\r\n\r\nconst navigation = new Navigation();\r\nconst highlighter = new Highlighter();\r\n\r\n// Create navigation menu\r\nnavigation.createNavMenu();\r\n\r\n// \r\nhighlighter.highlight();\r\n\r\n\r\n\r\n"]}